# Story 1.3: Display Clip on Simple Timeline

## Status
Draft

## Story
**As a** user,
**I want** to see my imported video clip represented visually on a simple timeline,
**so that** I have a context for editing.

## Acceptance Criteria
1. After import, a visual block representing the video clip appears on a timeline UI element.
2. The length of the block visually corresponds (approximately) to the clip's duration.
3. The timeline displays at least one track.

## Tasks / Subtasks
- [ ] Task 1: Create Timeline UI Components (AC: 1, 3)
  - [ ] Create Timeline component in apps/renderer/src/components/timeline/
  - [ ] Create TimelineTrack component for track display
  - [ ] Create TimelineClip component for clip visualization
  - [ ] Implement basic timeline layout with at least one track
- [ ] Task 2: Implement Timeline Data Model (AC: 1, 2)
  - [ ] Create Timeline interface in packages/shared/src/types/
  - [ ] Create TimelineTrack interface
  - [ ] Create TimelineClip interface
  - [ ] Implement timeline state management
- [ ] Task 3: Create Timeline Store (AC: 1, 2)
  - [ ] Create timelineStore.ts with Zustand
  - [ ] Implement timeline state management
  - [ ] Add clip positioning logic
  - [ ] Calculate timeline duration based on clips
- [ ] Task 4: Implement Visual Timeline Rendering (AC: 1, 2)
  - [ ] Create Canvas-based timeline rendering
  - [ ] Implement clip block visualization
  - [ ] Calculate clip width based on duration
  - [ ] Add timeline track display
- [ ] Task 5: Connect Timeline to Project State (AC: 1)
  - [ ] Integrate timeline with projectStore
  - [ ] Update timeline when clips are imported
  - [ ] Maintain timeline-clip relationships
  - [ ] Handle timeline updates
- [ ] Task 6: Implement Timeline Playhead (AC: 1, 2)
  - [ ] Create Playhead component in apps/renderer/src/components/timeline/
  - [ ] Implement playhead rendering on timeline canvas
  - [ ] Add playhead position state management
  - [ ] Implement playhead click-to-seek functionality
  - [ ] Add playhead visual styling and indicators
- [ ] Task 7: Add Timeline Styling and Layout (AC: 3)
  - [ ] Style timeline with Tailwind CSS
  - [ ] Implement responsive timeline layout
  - [ ] Add track headers and labels
  - [ ] Ensure proper visual hierarchy

## Dev Notes

### Previous Story Insights
From Story 1.2: Video import functionality is implemented with VideoClip data model and project state management.

### Data Models
**Timeline Interface** [Source: architecture.md#data-models]:
```typescript
interface Timeline {
  duration: number;
  playheadPosition: number;
  zoomLevel: number;
  tracks: TimelineTrack[];
  snapToGrid: boolean;
  gridSize: number;
}
```

**TimelineTrack Interface** [Source: architecture.md#data-models]:
```typescript
interface TimelineTrack {
  id: string;
  name: string;
  type: 'video' | 'audio';
  clips: TimelineClip[];
  muted: boolean;
  volume: number;
}
```

**TimelineClip Interface** [Source: architecture.md#data-models]:
```typescript
interface TimelineClip {
  id: string;
  videoClipId: string;
  trackId: string;
  startTime: number;
  endTime: number;
  trimStart: number;
  trimEnd: number;
  selected: boolean;
}
```

### API Specifications
No new API specifications required - uses existing project state management.

### Component Specifications
**Timeline Component** [Source: architecture.md#unified-project-structure]:
- Location: apps/renderer/src/components/timeline/Timeline.tsx
- Purpose: Main timeline container and rendering
- Features: Canvas-based rendering, track management, clip display
- Integration: Connected to timelineStore and projectStore

**TimelineTrack Component** [Source: architecture.md#unified-project-structure]:
- Location: apps/renderer/src/components/timeline/TimelineTrack.tsx
- Purpose: Individual track rendering
- Features: Track header, clip container, track controls
- Props: track, clips, onClipSelect

**TimelineClip Component** [Source: architecture.md#unified-project-structure]:
- Location: apps/renderer/src/components/timeline/TimelineClip.tsx
- Purpose: Individual clip visualization
- Features: Clip block rendering, duration-based width, selection state
- Props: clip, trackId, onSelect, onTrim

**Playhead Component** [Source: architecture.md#unified-project-structure]:
- Location: apps/renderer/src/components/timeline/Playhead.tsx
- Purpose: Timeline playhead indicator and interaction
- Features: Playhead rendering, click-to-seek, position synchronization
- Props: position, duration, onSeek, isVisible

### File Locations
**Component Files** [Source: architecture.md#unified-project-structure]:
- apps/renderer/src/components/timeline/Timeline.tsx
- apps/renderer/src/components/timeline/TimelineTrack.tsx
- apps/renderer/src/components/timeline/TimelineClip.tsx
- apps/renderer/src/components/timeline/Playhead.tsx

**Store Files**:
- apps/renderer/src/stores/timelineStore.ts
- apps/renderer/src/stores/projectStore.ts (updated)

**Type Definitions**:
- packages/shared/src/types/timeline.ts
- packages/shared/src/types/project.ts (updated)

### Testing Requirements
**Testing Standards** [Source: architecture.md#tech-stack]:
- Manual testing for MVP
- Test file location: apps/renderer/tests/
- Test cases: Timeline rendering, clip display, track management
- Performance: Timeline responsiveness with multiple clips

### Technical Constraints
**Canvas-Based Timeline** [Source: architecture.md#architectural-patterns]:
- Use HTML5 Canvas for performance-critical timeline rendering
- Implement efficient clip block rendering
- Handle timeline zoom and scroll (basic implementation)

**State Management** [Source: architecture.md#tech-stack]:
- Use Zustand for timeline state management
- Maintain timeline-clip relationships
- Update timeline when clips are imported

**Styling** [Source: architecture.md#tech-stack]:
- Use Tailwind CSS for timeline styling
- Implement responsive design
- Ensure proper visual hierarchy

## Testing

### Testing Standards
- **Test Approach**: Manual testing for MVP
- **Test Location**: apps/renderer/tests/
- **Test Framework**: Manual verification only
- **Key Test Cases**:
  - Timeline displays after clip import
  - Clip blocks appear with correct duration-based width
  - At least one track is visible
  - Timeline updates when new clips are imported
  - Visual representation matches clip duration
  - Timeline layout is responsive
  - Playhead is visible on timeline
  - Playhead click-to-seek functionality works
  - Playhead position updates correctly

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-27 | 1.0 | Initial story creation | Scrum Master Bob |
| 2025-01-27 | 1.1 | Added playhead implementation tasks and component specifications | Scrum Master Bob |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent review will be populated here*
